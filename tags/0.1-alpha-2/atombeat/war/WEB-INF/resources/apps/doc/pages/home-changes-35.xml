<?xml version="1.0" encoding="windows-1252"?>
<!--
    Copyright (C) 2006 Orbeon, Inc.

    The Orbeon documentation is not distributed under the LGPL license. Use of the documentation is
    subject to the following terms:

    * Conversion to other formats is allowed, but the actual content may not be altered or edited
      in any way.

    * You may create printed copies for your own personal use.

    * For all other uses, such as selling printed copies or using (parts of) the manual in another
      publication, prior written agreement from Orbeon, Inc. is required.

    Please contact Orbeon at info@orbeon.com for more information.
-->
<document xmlns:p="http://www.orbeon.com/oxf/pipeline" xmlns:xforms="http://www.w3.org/2002/xforms"
        xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
        xmlns:oxf="http://www.orbeon.com/oxf/processors" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:sql="http://orbeon.org/oxf/xml/sql" xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <header>
        <title>Changes in Version 3.5</title>
    </header>
    <body>
        <a name="introduction"/>
        <section>
            <title>Introduction</title>
            <p>
                Welcome to Orbeon Forms 3.5!
            </p>
            <p>
                Orbeon Forms 3.5 features many improvements over Orbeon PresentationServer (OPS) 3.0.1, including
                XForms engine performance enhancements, enhanced browser support, and quality improvements. Orbeon Forms
                3.5 also features a much simplified directory structure that makes it easier to get started with your
                own Orbeon Forms applications.
            </p>
            <p>
                This document describes changes made between Orbeon PresentationServer 3.0.1 and Orbeon Forms 3.5.2.
            </p>
        </section>
        <a name="changes-351"/>
        <section>
            <title>Changes in Version 3.5.1</title>
            <p>
                Orbeon Forms 3.5.1 is an update to Orbeon Forms 3.5.
            </p>
            <section>
                <title>Noteworthy Changes</title>
                <ul>
                    <li>
                        <p>
                            <b>Support for combined XForms resources.</b> The XForms engine now supports an option to
                            automatically combine CSS and JavaScript resources used by XForms pages. This can lead to page
                            loading time improvements. See the <a
                            href="reference-xforms-extensions#xforms-combined-resources">XForms Reference</a> for details.
                        </p>
                        <p>
                            <i>This feature was kindly sponsored by Teleflex.</i>
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Tree and menu memory leaks.</b> The tree and menu controls have been causing significant
                            memory leaks on the browser, especially on in IE. The leaks could be in the order of several
                            MB per page load. If you are using the tree or menu control, you should consider upgrading to
                            3.5.1. See issue <a
                            href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306754">#306754</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Incorrect XPath evaluation of <code>preceding::</code> and <code>preceding-sibling::</code>
                            axes.</b> This issue could result in particularly confusing results when using XPath expressions
                            with these axes from XForms. See issue <a
                            href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306836">#306836</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>XSLT memory leak.</b> In certain circumstances, too many objects were stored in the Orbeon
                            Cache when using XSLT. This could cause Orbeon Forms to run out of memory. See issue <a
                            href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306826">#306826</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>XForms Classic memory leaks.</b> In certain circumstances, too many objects were stored in
                            the Orbeon Cache when using <a href="home-faq#xforms-classic-ng">XForms Classic</a>. This
                            could cause Orbeon Forms to run out of memory. See issue <a
                            href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306827">#306827</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Partial support for <code>ev:observer</code> attribute.</b> This attribute, defined by the
                            XML Events specification, allows you to register event handlers by specifying an element
                            identifier, instead of embedding the event handler within that element. This is particularly
                            useful to register event handlers on <code>&lt;xforms:instance></code> elements, which do not
                            allow you to directly embed XML event handlers. The current support is limited to adding the
                            <code>ev:observer</code> attribute on XForms actions under <code>&lt;xforms:model></code> with
                            the <code>ev:observer</code> attribute referring to a child <code>&lt;xforms:instance></code>.
                            See the <a href="reference-xforms-guide#events-observer">XForms Reference</a> for details.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>New <code>xxforms:index()</code> function.</b> The <code>xxforms:index()</code> function
                            behaves like the standard XForms <code>index()</code> function, except that its argument is
                            optional. When the argument is omitted, the function returns the index of the closest enclosing
                            <code>&lt;xforms:repeat></code> element. See the <a
                            href="reference-xforms-extensions#xxforms-index">XForms Reference</a> for details.

                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Attribute Value Templates (AVTs).</b> Support for AVTs is now <a
                            href="reference-xforms-extensions#avts">documented</a>. Support for escaping brackets has been added.
                            See issue <a
                            href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306835">#306835</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Auto-complete field in repeat.</b> Only the auto-complete initially present when the page was
                            generated used to work in repeat. Now the auto-complete feature also works on auto-complete
                            controls that are added to the page after it is first loaded. See issue <a
                            href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;aid=306805&amp;group_id=168&amp;atid=350207">#306805</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Documentation of submission attribute.</b> The extension attribute <a
                            href="reference-xforms-extensions#submission-show-progress"><code>xxforms:show-progress="false"</code></a>
                            of <code>&lt;xforms:submission></code> is now documented.
                        </p>
                    </li>
                </ul>
            </section>
            <a name="changes-351-full"/>
            <section>
                <title>Complete List of Issues Addressed in this Release</title>
                <ul>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306805">#306805: Autocomplete doesn't work in repeat</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306850">#306850: Support XForms 1.1 xforms-insert and xforms-delete context information</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306828">#306828: XInclude: namespace declared and undeclared on the same element</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306849">#306849: Using schema id constraints throws exception</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306843">#306843: xforms:repeat only allows styling selected row up to two levels</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306835">#306835: Support escaping of { and } in AVTs</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306806">#306806: Autocomplete doesn't work in dialog</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306837">#306837: xforms:message/@level is not required in XForms 1.1</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306836">#306836: Saxon dom4j wrapper incorrectly iterates over preceding-sibling:: and preceding:: axes</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306832">#306832: xforms:group gets too many events</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306829">#306829: When item is added, label is not displayed</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306827">#306827: XForms Classic keeps references to PipelineContext objects</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306826">#306826: XSLT TransformerURIResolver object keeps references to PipelineContext object</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306795">#306795: Stack overflow with long URL</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306793">#306793: MIP for read-only instances should return readonly="true"</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306782">#306782: Combined resources cache should generate resources upon loading the page</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=305780">#305780: Way to pass the base URL to the client</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306268">#306268: xforms:select does not update as instance values change</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306530">#306530: IE: JS error when canceling page unload</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306542">#306542: xforms:select1 won't dropdown after showing a dialog</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306754">#306754: Menu and tree causing memory leak on IE</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306592">#306592: Repeat bug with IE 6</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306676">#306676: "Could not set the selected property" in IE</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=305808">#305808: Server to send XForms server URL to client when the page is loaded</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306708">#306708: NPE when enabling XForms instance inspector</a>
                    </li>
                    <li>
                    <a href="http://forge.objectweb.org/tracker/index.php?func=detail&amp;group_id=168&amp;atid=350207&amp;aid=306540">#306540: Setfocus action does not work for auto-complete field</a>
                    </li>
                </ul>
            </section>
        </section>
        <a name="changes-35"/>
        <section>
            <title>Changes in Version 3.5</title>
            <p>
                Orbeon Forms 3.5 features the following changes:
            </p>
            <a name="name-change"/>
            <section>
                <title>Orbeon PresentationServer is now Orbeon Forms</title>
                <p>
                    The product has been renamed Orbeon Forms. Plase refer to the <a
                    href="/doc/home-faq#name-change">FAQ entry</a> for more information.
                </p>
            </section>
            <a name="xforms-tutorial"/>
            <section>
                <title>New Orbeon Forms Tutorial</title>
                <p>
                    A <a href="intro-tutorial">brand new tutorial</a> is available! It guides you through the Orbeon
                    Forms installation, a simple <a href="/xforms-hello/">Hello</a> application, and then shows how to
                    build the <a href="/xforms-bookcast/">Bookcast</a> application, complete with handling of
                    persistence and production of an Atom feed.
                </p>
            </section>
            <a name="xforms-performance"/>
            <section>
                <title>XForms Performance</title>
                <ul>
                    <li>
                        <p>
                            <b>Client-side performance improvements.</b> The client-side event handling has been
                            entirely reworked. Client-side JavaScript performance is now greatly improved and large
                            forms that took seconds to load because of client-side JavaScript now load almost instantly.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Server-side performance improvements.</b> New caches have been added to improve
                            server-side performance, including a separate XPath cache and an XForms document cache. In
                            addition, the number of XPath expressions executed as you interact with a form has been
                            reduced.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>JavaScript and CSS loading.</b> JavaScript and CSS files related to particular XForms
                            controls are loaded only when necessary. In addition, the property
                            <code>oxf.xforms.minimal-resources</code> allows specifying whether "minimal" versions of
                            those resources should be used when possible. See the <a
                            href="reference-xforms-extensions#xforms-minimal-resources">XForms Reference</a> for details.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Read-only and shared instances.</b> XForms instances can be marked as read-only and can
                            be globally shared. See <a href="reference-xforms-extensions#xxforms-readonly">Read-Only XForms
                            Instances</a> and <a href="reference-xforms-extensions#xxforms-shared">Sharing of Read-Only XForms
                            Instances</a> for details.
                        </p>
                    </li>
                </ul>
            </section>
            <a name="xforms-platform-support"/>
            <section>
                <title>XForms Platform Support</title>
                <ul>
                    <li>
                        <p>
                            <b>Safari and Opera support.</b> Support for Safari 1.3 and above and Opera 8.5 and above in
                            addition to Firefox and Internet Explorer. The main limitation is that the WYSIWYG HTML
                            area does not work on Opera and Safari.
                        </p>
                        <p>
                            <i>The Safari support was kindly sponsored by Object Consulting.</i>
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Support for Liferay portal.</b> Orbeon Forms, including XForms functionality, is now able
                            to deploy as JSR-168 portlets within Liferay portal (version 4.2.1 is the most recent tried,
                            other versions and other portals may also work), including multiple Orbeon Forms portlets at
                            the same time. For more information, see <a
                            href="integration-portlets#portlet-deployment-liferay">Liferay Deployment</a>.
                        </p>
                        <p>
                            <i>This feature was kindly sponsored by Atkins Transport Systems.</i>
                        </p>
                    </li>
                </ul>
            </section>
            <a name="xforms-printable-formats"/>
            <section>
                <title>XForms Printable Formats</title>
                <ul>
                    <li>
                        <p>
                            <b>Read-only mode for forms.</b> A read-only mode is now supported with the
                            <code>xxforms:readonly-appearance</code> attribute. With
                            <code>xxforms:readonly-appearance="static"</code>, read-only controls take a static
                            appearance appropriate for read-only rendition of forms in HTML. See <a
                            href="/forms/">Government Forms</a> sample application's <i>View Read-Only</i> option for
                            an example, as well as the <a href="reference-xforms-extensions#readonly-mode">Read-Only Mode</a>
                            documentation.
                        </p>
                        <p>
                            <i>This feature was kindly sponsored by Esprit.</i>
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Improved PDF generation.</b> The PDF Template processor has been improved to facilitate
                            the creation of PDF versions of forms based on PDF templates. The processor now supports
                            groups, repetitions, and XPath 2.0. See <a href="/forms/">Government Forms</a> sample
                            application's <i>View PDF</i> option for an example.
                            <!-- TODO: document -->
                        </p>
                    </li>
                </ul>
            </section>
            <a name="xforms-controls-enhancements"/>
            <section>
                <title>XForms Controls Enhancements</title>
                <ul>
                    <li>
                        <p>
                            <b>Autocomplete control.</b> You enable this on <code>xforms:select1</code> with the
                            <code>xxforms:autocomplete</code> appearance. See <a href="/xforms-controls/">XForms
                            Controls</a> and <a href="/xforms-google-suggests/">Google Suggests</a> for examples.
                        </p>
                        <p>
                            <i>This feature was kindly sponsored by Mobydoc.</i>
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>WYSIWYG HTML editor control.</b> You enable this on <code>xforms:textarea</code> with the
                            <code>text/html</code> mediatype. See <a href="/xforms-html-area/">XForms HTML Area</a> for
                            an example.
                        </p>
                        <p>
                            <i>This feature was kindly sponsored by Teleflex.</i>
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Tree control and menu control.</b> You enable this on <code>xforms:select1</code> and
                            <code>xforms:select</code> (tree only) with the <code>xxforms:tree</code> and
                            <code>xxforms:menu</code> apperances. <!-- TODO: examples -->
                        </p>
                        <p>
                            <i>This feature was kindly sponsored by Teleflex.</i>
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Dialog control.</b> This control allows you to show modal or modeless dialogs.
                            <!-- TODO: document + example -->
                        </p>
                        <p>
                            <i>This feature was kindly sponsored by Teleflex.</i>
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Upload control.</b> The upload control now works when submitting instances with
                            <code>replace="instance"</code> or <code>replace="none"</code>. From the form user's
                            perspective, this allows uploading files in the background. See <a
                            href="/xforms-upload/">XForms Upload</a> for examples. <!-- TODO: document -->
                        </p>
                        <p>
                            <i>This feature was kindly sponsored by Teleflex.</i>
                        </p>
                    </li>
                  <li>
                        <p>
                            <b>Selection controls.</b> Support of hierarchy for single selection controls
                            <code>xforms:select1</code> when using the <code>minimal</code> and <code>compact</code>
                            appearances. Support for mix-and-match of <code>xforms:item</code>,
                            <code>xforms:itemset</code> and <code>xforms:choices</code> <!-- TODO: example (from blog entry?) -->
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Switch within repeat.</b> Enhanced support of <code>xforms:switch</code> within
                            <code>xforms:repeat</code>. <!-- TODO: example -->
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Enhanced <code>xforms:output</code> support.</b> Support for
                            <code>xforms:output</code> in <code>xforms:label</code>, <code>xforms:hint</code>,
                            <code>xforms:help</code>, and <code>xforms:alert</code>. This allow you to dynamically
                            build the value of labels, etc. For example:
                        </p>
                        <xml-source show-namespaces="false">
                            <xforms:trigger>
                                <xforms:label>Dynamic label with a number (<xforms:output value="count(/*/*)"/>) in it!</xforms:label>
                            </xforms:trigger>
                        </xml-source>
                        <!-- TODO: document -->
                        <p>
                            <i>This feature was kindly sponsored by Esprit.</i>
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>HTML and XHTML within <code>xforms:help</code></b> Support for HTML and literal XHTML
                            within <code>xforms:help</code> and <code>xforms:hint</code>. See the <a
                            href="reference-xforms-guide#xforms-label-alert-help-hint">XForms Reference</a> for
                            documentation.
                        </p>
                        <p>
                            <i>This feature was kindly sponsored by Teleflex.</i>
                        </p>
                    </li>
                </ul>
            </section>
            <a name="xforms-11-features"/>
            <section>
                <title>XForms 1.1 Features</title>
                <ul>
                    <li>
                        <p>
                            <b>Insert and delete actions.</b> Support for the XForms 1.1 <a
                            href="reference-xforms-extensions#insert-context-attribute"><code>context</code></a> and <a
                            href="reference-xforms-extensions#insert-origin-attribute"><code>origin</code></a> attributes on
                            <code>xforms:insert</code> and <code>xforms:delete</code>. <!-- TODO: point to example,
                            insertion into empty elements, attributes, etc. -->
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Conditional XForms actions.</b> Support for XForms 1.1 conditional actions with the
                            <code>if</code> (and <code>exf:if</code>) attributes. <!-- TODO: example -->
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Repeated XForms actions.</b> Support for XForms 1.1 actions iterations with the
                            <code>while</code> (and <code>exf:while</code>) attributes. <!-- TODO: example -->
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>New functions.</b> Support for XForms 1.1 <code>digest()</code>, <code>random()</code>
                            and <code>seconds-to-dateTime()</code> functions. <!-- TODO: document -->
                        </p>
                    </li>
                </ul>
            </section>
            <a name="xforms-submission-enhancements"/>
            <section>
                <title>XForms Submission Enhancements</title>
                <ul>
                    <li>
                        <p>
                            <b>HTTP authentication for instances and submissions.</b>
                            <code>xforms:instance</code> and <code>xforms:submission</code> support the
                            <code>xxforms:username</code> and <code>xxforms:password</code> to supply
                            authorization credentials when using HTTP.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>AVTs on <code>xforms:submission</code>.</b> Support for attribute value
                            templates (AVT) on <code>xforms:submission</code> <code>action</code>,
                            <code>xxforms:username</code> and <code>xxforms:password</code> attributes.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>DELETE HTTP method.</b> Support for the XForms 1.1 <code>DELETE</code>
                            HTTP method on <code>xforms:submission</code>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b><code>urlencoded-post</code> submission method.</b> Support for the
                            <code>urlencoded-post</code> method is now available. This allows in particular using the
                            HTTP POST method to access APIs such as the <a
                            href="http://www.flickr.com/services/api/">Flickr API</a>. <!-- TODO: document -->
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>XForms 1.1 attributes.</b> Support for <code>xforms:submission</code>'s
                            <code>serialize</code>, <code>validate</code>, and <code>relevant</code> attributes.
                        </p>
                    </li>
                </ul>
            </section>
            <a name="xforms-extensions"/>
            <section>
                <title>XForms Extensions</title>
                <ul>
                    <li>
                        <p>
                            <b><code>xxforms:instance()</code> extension function.</b> The <a
                            href="reference-xforms-extensions#xxforms-instance"><code>xxforms:instance()</code></a>
                            function works like the standard <code>instance()</code> function except that it
                            searches for instances in all the models of the XForms document.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b><code>exforms:sort()</code> extension function.</b> The <a
                            href="reference-xforms-extensions#exforms-sort"><code>exforms:sort()</code></a> function
                            implements the <a href="http://exforms.org/sorting.html">eXforms proposal's</a> sorting
                            function.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b><code>xxforms:context()</code> extension function.</b> The <a
                            href="reference-xforms-extensions#xxforms-context"><code>xxforms:context()</code></a> XPath
                            function allows you to obtain the evaluation context for an enclosing
                            <code>xforms:group</code>, <code>xforms:repeat</code>, or <code>xforms:switch</code>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b><code>xxforms:evaluate()</code> extension function.</b> The <a
                            href="reference-xforms-extensions#xxforms-serialize"><code>xxforms:serialize()</code></a> XPath
                            functions allow you to respectively evaluate dynamic XPath expressions and serialize XML
                            documents.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b><code>xxforms:repeat-current()</code> extension function.</b> The <a
                            href="reference-xforms-extensions#xxforms-repeat-current"><code>xxforms:repeat-current()</code></a>
                            XPath function allws you to find the current item of an enclosing
                            <code>xforms:repeat</code>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b><code>xxforms:script</code> extension action.</b> A new extension action <a
                            href="reference-xforms-extensions#xxforms-script-extension"><code>xxforms:script</code></a>
                            allows you to call client-side JavaScript code as a result of XForms events.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Extension attributes on controls.</b> The following extension attributes on
                            <code>xforms:input</code> and <code>xforms:textarea</code> allow you to control aspects of
                            the underlying HTML controls: <code>xxforms:size</code>, <code>xxforms:maxlenght</code> and
                            <code>xxforms:rows</code>, <code>xxforms:cols</code>. See <a
                            href="reference-xforms-guide#xforms-input-control"><code>xforms:input</code></a> and <a
                            href="reference-xforms-guide#xforms-textarea-control"><code>xforms:textarea</code></a>.
                        </p>
                    </li>
                </ul>
            </section>
            <a name="xforms-instance-inspector"/>
            <section>
                <title>XForms Instance Inspector</title>
                <p>
                    The new <a href="reference-xforms-extensions#xforms-instance-inspector">Instance Inspector</a> allows you
                    to visualize all the instances of your XForms page.
                </p>
                <img src="../apps/doc/images/instance-inspector.png"/>
            </section>
            <a name="new-example-applications-portal"/>
            <section>
                <title>New Example Applications Portal</title>
                <p>
                    In previous versions, the examples portal, which shows the built-in Orbeon Form example, was
                    implemented with a custom JSR-168 container. Example applications ran in as a JSR-168 portlet.
                    Because the portal introduced an indirection and was not particularly optimized, this led to
                    performance issues. In addition, it was not clear to users how they could run examples outside the
                    examples portal.
                </p>
                <p>
                    In this version of Orbeon Forms:
                </p>
                <ul>
                    <li>
                        <p>
                            The Orbeon JSR-168 container is removed. Applications, including all the examples, are now
                            directly displayed without going through the portal. This means that examples now run much
                            faster by default.
                        </p>
                    </li>
                    <li>
                        <p>
                            <a href="integration-portlets">JSR-168 support</a> is still present (in fact it is much
                            improved), but Orbeon Forms no longer comes with its own portal. Use a portal such as
                            Liferay to deploy Orbeon Forms portlets.
                        </p>
                    </li>
                    <li>
                        <p>
                            The example applications portal layout is simply created in a theme under
                            <code>config/theme-portal.xsl</code>.
                        </p>
                    </li>
                    <li>
                        <p>
                            Example descriptors (<code>example-descriptor.xml</code>) included with each example are
                            now removed. The Orbeon Forms source code viewer no longer uses this file and automatically
                            gathers the list of files for each application.
                        </p>
                    </li>
                </ul>
            </section>
            <a name="improved-directory-structure"/>
            <section>
                <title>Improved Applications Directory Structure</title>
                <p>
                    The Orbeon Forms resources (found under <code>WEB-INF/resources</code>) are now better organized:
                </p>
                <ul>
                    <li>
                        <p>
                            A single top-level <code>apps</code> directory contains all the applications deployed within
                            Orbeon Forms. To create your own applications, simply create a subdirectory of the
                            <code>apps</code> directory that contains a Page Flow file (<code>page-flow.xml</code>).
                            Adding or removing applications is is simply a matter of adding or removing directories.
                        </p>
                    </li>
                    <li>
                        <p>
                            The only remaining top-level directory, besides the <code>apps</code> directory, is the
                            <code>config</code> directory, which contains Orbeon Forms configuration files that you can
                            modify according to your needs.
                        </p>
                    </li>
                    <li>
                        <p>
                            The contents of the private <code>ops</code> directory is moved to JAR files:
                            <code>ops-resources-private.jar</code> and <code>ops-resources-public.jar</code>. You should
                            rarely have to modify these resources, unless you are adding functionality to Orbeon Forms
                            or fixing Orbeon Forms bugs.
                        </p>
                        <ul>
                            <li>
                                <p>
                                    <code>ops-resources-private.jar</code> contains private Orbeon Forms resources.
                                </p>
                            </li>
                            <li>
                                <p>
                                    <code>ops-resources-public.jar</code> contains public Orbeon Forms resources. This
                                    JAR file can be expanded in order to allow its content to be served directly by a
                                    web server such as Apache.
                                </p>
                            </li>
                        </ul>
                    </li>
                </ul>
                <p>
                    The new directory structure makes it easier to get started with your own Orbeon Forms applications.
                    It also makes upgrading to a new version of Orbeon Forms easier, since the files you are not likely
                    to modify are packaged in JAR files that you simply replace during an upgrade.
                </p>
            </section>
            <a name="government-forms"/>
            <section>
                <title>New Government Forms Sample Application</title>
                <p>
                    Previous versions of Orbeon Forms came with the "BizDoc" and then the "DMV Forms" sample
                    applications. Orbeon Forms 3.5 comes with the <a href="/forms/">Government Forms</a> application,
                    which shows how you can handle complex forms with Orbeon Forms. In particular:
                </p>
                <ul>
                    <li>
                        <p>
                            Create, save, update, and delete forms persisted in the eXist XML database using a REST
                            API directly from XForms.
                        </p>
                    </li>
                    <li>
                        <p>
                            Perform as-you-type validation and display an always up-to-date error summary.
                        </p>
                    </li>
                    <li>
                        <p>
                            Produce read-only, XML or PDF versions of your forms.
                        </p>
                    </li>
                    <li>
                        <p>
                            Handle internationalization and change language on the fly.  
                        </p>
                    </li>
                </ul>
            </section>
            <a name="other-enhancements"/>
            <section>
                <title>Other Enhancements</title>
                <ul>
                    <li>
                        <p>
                            <b>XInclude processor.</b> The <a href="processors-xinclude">XInclude processor</a> now
                            supports an extension attribute, <code>xxi:omit-xml-base</code>, which disables producing
                            <code>xml:base</code> attributes upon inclusion. This can be quite useful when performing
                            schema validation on the result, or when <code>xml:base</code> resolution on the result must
                            be performed relative to the URL base of the including document, such as when including an
                            XForms model into an XForms page.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>New XForms Submission processor.</b> A new <a href="processors-submission">XForms
                            Submission processor</a> has been added. It exposes the functionality of
                            <code>&lt;xforms:submission></code> to XML pipelines and allows you to call REST services
                            from XPL without creating XForms pages.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>New Execute processor.</b> A new Execute processor has been added. It allows executing
                            external commands and retrieving the command's standard output and standard error. <!-- TODO: document -->
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>XUpdate processor.</b> The XUpdate processor now supports an extension element,
                            <code>xu:node-set</code>, which allows functions to return node-sets.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Delegation processor.</b> When using the delegation processor to call web services, by
                            default the processor throws an exception when the remote service returns a SOAP fault. Now
                            the delegation processor can also be configured to return the SOAP fault document instead
                            of throwing an exception.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Portlet preferences processor.</b> Two processors,
                            <code>oxf:portlet-preferences-generator</code> and
                            <code>oxf:portlet-preferences-serializer</code>, allow for reading and writing portlet
                            preferences. See <a href="integration-portlets#portlet-preferences">JSR-168 Portlets</a>
                            for more information.
                        </p>
                    </li>
                </ul>
            </section>
            <a name="library-upgrades"/>
            <section>
                <title>Library Upgrades</title>
                <ul>
                    <li>
                        <p>
                            Upgrade to the <a href="http://developer.yahoo.com/yui/">Yahoo! User Interface library</a>
                            as a support library for the client-side part of the XForms engine. Orbeon Forms no longer
                            uses <a href="http://sarissa.sourceforge.net/doc/overview-summary.html">Sarissa</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            The embedded eXist database has been upgraded to version 1.1.1.
                        </p>
                    </li>
                    <li>
                        <p>
                            The embedded Saxon XSLT, XQuery and XPath engine has been upgraded to version 8.8.
                        </p>
                    </li>
                    <li>
                        <p>
                            Other JAR files have been updated to more recent versions, including dom4j (1.6.1), Jaxen
                            (1.1 beta 9), and ant (1.6.5).
                        </p>
                    </li>
                </ul>
            </section>
            <a name="bug-fixes"/>
            <section>
                <title>Bug-Fixes</title>
                <p>
                    Too many bugs have been fixed to be listed here. You can search for closed bugs on the <a
                    href="http://forge.objectweb.org/tracker/index.php?group_id=168&amp;atid=350207">ObjectWeb
                    Tracker.</a>
                </p>
            </section>
            <a name="upgrade-notes"/>
            <section>
                <title>Upgrade Notes</title>
                <p>
                    Since the Orbeon Forms resources (found under WEB-INF/resources) have been reorganized, you will
                    have to do a few changes when you upgrade from OPS 3.0 or 3.5 M1 to Orbeon Forms 3.5. We suggest the
                    following:
                </p>
                <ul>
                    <li>
                        <p>First, backup everything  ;-)</p>
                    </li>
                    <li>
                        <p>Rename your old <code>resources/ops</code> to <code>resources/ops.bak</code>.</p>
                    </li>
                    <li>
                        <p>Rename your old <code>resources/config</code> to <code>resources/config.bak</code>.</p>
                    </li>
                    <li>
                        <p>Copy the new Orbeon Forms <code>resources/config</code> directory to your <code>resources</code> directory.</p>
                    </li>
                    <li>
                        <p>If you hadn't make any custom changes under the <code>config</code> directory, that should be
                        it. Otherwise, you will need to merge those changes into the new <code>config</code> directory.
                        Note in particular that <code>theme.xsl</code> no longer exist, and is replaced instead by
                        <code>theme-plain.xsl</code> and <code>theme-portal.xsl</code> (referred from <code>epilogue-servlet.xpl</code>).</p>
                    </li>
                </ul>
            </section>
        </section>
    </body>
</document>
