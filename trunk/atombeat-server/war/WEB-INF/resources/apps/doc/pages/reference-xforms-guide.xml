<?xml version="1.0" encoding="windows-1252"?>
<!--
  Copyright (C) 2010 Orbeon, Inc.

  This program is free software; you can redistribute it and/or modify it under the terms of the
  GNU Lesser General Public License as published by the Free Software Foundation; either version
  2.1 of the License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  See the GNU Lesser General Public License for more details.

  The full text of the license is available at http://www.gnu.org/copyleft/lesser.html
  -->
<document xmlns:p="http://www.orbeon.com/oxf/pipeline"
          xmlns:xforms="http://www.w3.org/2002/xforms"
          xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
          xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:xhtml="http://www.w3.org/1999/xhtml"
          xmlns:ev="http://www.w3.org/2001/xml-events"
          xmlns:xi="http://www.w3.org/2001/XInclude" >
    <header>
        <title>XForms Reference: XForms Guide</title>
    </header>
    <body>
        <section>
            <title>Introduction</title>
            <p>
                Web applications use forms to collect data from users. Orbeon Forms's form handling capabilities are
                based on <link href="http://www.w3.org/MarkUp/Forms/">XForms</link>, namely the <a
                href="http://www.w3.org/TR/xforms11/">XForms 1.1 W3C Candidate Recommendation</a>. This section
                provides an introduction to XForms concepts and explains how to use XForms in your Orbeon Forms
                application.
            </p>
            <note>
                <p>
                    This document is considered a work in progress. While it does cover some generic features of XForms,
                    it focuses before all on features specific to the Orbeon Forms XForms engine. For more information
                    about XForms, please refer to the following resources:
                </p>
                <ul>
                    <li>
                        <a href="http://www.w3.org/TR/xforms11/">XForms 1.1 W3C Candidate Recommendation</a>
                    </li>
                    <li>
                        <a href="http://xformsinstitute.com/essentials/">XForms Essentials</a>, by
                        Micah Dubinko (also at <a
                        href="http://www.amazon.com/gp/product/0596003692/">Amazon</a>).
                    </li>
                    <li>
                        XForms: XML Powered Web Forms, by T. V. Raman (also at <a
                        href="http://www.amazon.com/gp/product/0321154991/">Amazon</a>).
                    </li>
                </ul>
                <p>
                    We also recommend that you follow the <a href="intro-tutorial">Orbeon Forms Tutorial</a> first!
                </p>
            </note>
            <p>
                This part of the XForms reference documentation focuses on standard XForms features provided by Orbeon
                Forms.
            </p>
        </section>
        <a name="introduction"/>
        <section>
            <title>About XForms</title>
            <section>
                <title>Origin, Today, and Tomorrow</title>
                <p>
                    XForms 1.0 has been designed by the W3C based on experience with HTML forms. It was promoted to the
                    rank of W3C Recommendation in October 2003, and a <a
                    href="http://www.w3.org/TR/2005/PER-xforms-20051006/">second edition</a> of the specification was
                    released in March 2006. The <a href="http://www.w3.org/MarkUp/Forms/">XForms Working Group at
                    W3C</a> is as of March 2009 working on XForms 1.1 implementations, and also looking at XForms 1.2
                    or XForms 2.0. For more information about XForms, please refer to the <a
                    href="home-faq#xforms">FAQ</a>.
                </p>
                <p>
                    Mainstream browsers (Internet Explorer, Mozilla / Firefox, Opera, Safari) do not support XForms
                    natively, although XForms support in Mozilla is under way and plugins are available for Internet
                    Explorer. However you can leverage the benefits of XForms today by using an Ajax-based XForms
                    engine like the one provided in Orbeon Forms. The Orbeon Forms XForms engine transparently generates
                    HTML forms and performs the work that would be done by an XForms-compliant browser, and you can
                    leverage XForms today within the mainstream browsers that are already deployed in the marketplace.
                </p>
                <p>
                    For more information about the whys and therefores of server-side and Ajax-based XForms engines,
                    please refer to the <a href="home-faq#xforms-server-side">FAQ</a>.
                </p>
            </section>
            <section>
                <title>Benefits</title>
                <p>
                    Compared to HTML forms, XForms offers a higher level approach to forms. The benefits are that less
                    programming is needed (less JavaScript, and less
                    server-side programming), so forms are easier to create and modify. As an
                    illustration, let's consider some facets of XForms:
                </p>
                <ol>
                    <li>
                        <p>
                            <b>XML Representation of Forms.</b> XForms clearly defines how data
                            entered by the end-user is collected: it is stored in an XML document
                            called an XForms <i>instance</i>, an initially empty, "skeletal" XML
                            instance document that defines the structure of the data you wish to
                            collect from the user, which is afterwards filled out with information
                            collected from the user. For example, credit card information collected
                            on a web site can be structured as follows:
                        </p>
                        <xml-source>
                            <credit-card>
                                <type/>
                                <number/>
                                <expiration-month/>
                                <expiration-year/>
                            </credit-card>
                        </xml-source>
                        <p>
                            The outcome of the user filling out a form collecting this information
                            could be this complete XML document:
                        </p>
                        <xml-source>
                            <credit-card>
                                <type>visa</type>
                                <number>1234567812345678</number>
                                <expiration-month>8</expiration-month>
                                <expiration-year>2008</expiration-year>
                            </credit-card>
                        </xml-source>
                        <p>
                            An application using this data to do some processing (e.g. checking the
                            validity of the credit card) receives the above XML document. There is
                            no need to write code to go read HTTP request parameters, or to use a
                            framework performing this task: XForms does it all.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Declarative Constraints and Validation.</b> More often than not,
                            there are constraints on the data that can be entered by the end-user.
                            For instance, in the example we just considered, the card number must
                            have 16 digits and the expiration month must be a number between 1 and
                            12. Traditionally code must be written to check for those constraints.
                            And more code must be written to handle error conditions (getting back
                            to the page displaying the form and showing the appropriate error
                            messages). All this is done is very simple and declarative way with
                            XForms. For instance, checking that the expiration month is valid number
                            between 1 and 12 can be done with:
                        </p>
                        <xml-source show-namespaces="false">
                            <xforms:bind nodeset="/credit-card/expiration-month" type="xs:integer" constraint=". >= 1 and 12 >= ."/>
                        </xml-source>
                        <p>
                            An error message can be attached to the "month" text field and if the
                            end-user enters an invalid month the XForms engine will notice that the
                            above constraint is not met and will display the error message. You do
                            not have to write any code for this to happen. We will see later how you
                            go about doing this with XForms in more details.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Declarative Event Handling.</b> User interfaces need to react to
                            user event such as mouse clicks and character entry. With most UI
                            frameworks, developers must register event handlers and implement them
                            in JavaScript, Java, or other traditional imperative languages. With
                            XForms, a set of predefined event handlers and actions are available,
                            which cover a set of useful cases without requiring understanding the
                            complex syntax and semantic of JavaScript or Java. For example, to set a
                            value into an XForms instance, you write:
                        </p>
                        <xml-source show-namespaces="false">
                            <xforms:setvalue ref="/credit-card/expiration-month">11</xforms:setvalue>
                        </xml-source>
                        <p>
                            Once you have learned the simple built-in XForms actions, you can
                            combine them in sequences to obtain more complex behavior.
                        </p>
                    </li>
                </ol>
            </section>
            <!--
            <section>
                <title>Processing Model</title>
                <img print-format="pdf" src="../apps/doc/images/reference-xforms-model-controls.png" style="clear: both; float: right"/>
                <p>
                    XForms exposes two main components that are distinct but designed to work
                    closely with one another:
                </p>
                <ul>
                    <li>
                        <p>
                            <b>XForms models:</b> XForms models define the data that needs to be
                            captured as well as constraints on this data.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>XForms controls:</b> XForms controls are widgets, like a text field or a
                            drop down combo box. They are generally used in an XHTML page to define the
                            visual representation of a form.
                        </p>
                    </li>
                </ul>
                <img print-format="pdf" src="../apps/doc/images/reference-xforms-operation-model.png" style="clear: both; float: right"/>
                <p>
                    At a high level, an application interacts with an end-user through the
                    following steps:
                </p>
                <ol>
                    <li>
                        <p>
                            The application generates an XHTML page which contains XForms controls,
                            and provides one or more XForms models for that page.
                        </p>
                    </li>
                    <li>
                        <p>
                            The XForms engine processes the XForms controls and sends a HTML page to the
                            end-user's browser.
                        </p>
                    </li>
                    <li>
                        <p>
                            The end-user fills out the form.
                        </p>
                        </li>
                    <li>
                        <p>
                            The XForms engine creates an XML document (called the XForms instance)
                            based on the values entered by the end-user, and sends this document to the
                            application.
                        </p>
                    </li>
                    <li>
                        <p>
                            The application performs its business logic based on the submitted XForms
                            instance.
                        </p>
                    </li>
                </ol>
                <p>
                    Your role as the author of an Orbeon Forms application is:
                </p>
                <ul>
                    <li>
                        <p>
                            To provide one or more XForms models (step 1 above).
                        </p>
                    </li>
                    <li>
                        <p>
                            To provide the description of the form user interface using XForms
                            controls (step 1 above).
                        </p>
                    </li>
                    <li>
                        <p>
                            To respond to the submission of an XForms instance which contains data
                            captured from the end-user (step 5 above).
                        </p>
                    </li>
                </ul>
                <p>
                    In this chapter we explore the first two aspects. You hook-up your backend
                    logic for a page in your application page flow. The <a
                    href="reference-page-flow">Page Flow Controller</a> documentation details how
                    this is done.
                </p>
            </section>
            -->
        </section>
        <a name="xforms-getting-started"/>
        <section>
            <title>Getting Started With the Orbeon Forms XForms Engine</title>
            <section>
                <title>The XForms Sandbox</title>
                <p>
                    The easiest way to get started with simple examples is to use the Orbeon Forms XForms Sandbox. This
                    tool allows you to upload example XForms files from your web browser and to see the results
                    directly. You can access the XForms sandbox:
                </p>
                <ul>
                    <li>
                        <p>
                            <b>Online:</b> visit <a
                            href="http://www.orbeon.com/ops/xforms-sandbox/">this link</a>
                            to access the online public XForms Sandbox.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>Locally:</b> if this documentation is produced by your local installation of Orbeon
                            Forms, visit <a href="/xforms-sandbox/">this link</a>.
                        </p>
                    </li>
                </ul>
                <p>
                    After submitting an XHTML + XForms file, the result, or errors, should display.
                    If you have changed your local XForms file, reloads that page in your browser
                    and this will upload again your local XForms file and the XForms Sandbox will
                    run the new version. To select another file to upload use your browser quotes
                    "back" button to return to the main XForms sandbox page.
                </p>
            </section>
            <!--
            <section>
                <title>Integrating XForms in Orbeon Forms</title>
                <p>
                    TODO: past the sandbox, how to integrate XForms with Orbeon Forms: single static page,
                    dynamic page, PFC and MVC, submissions, services, proxy mode, etc.
                </p>
            </section>
            -->
            <section>
                <title>Browser Support</title>
                <p>
                    [TODO: detail browser support]
                </p>
            </section>
        </section>
        <section>
            <title>Programming With XForms</title>
            <a name="xforms-model"/>
            <section>
                <title>XForms Model</title>
                <img src="../apps/doc/images/reference-xforms-type.png" class="ops-doc-image"/>
                <section>
                    <title>Introduction</title>
                    <p>
                        To help in our exploration of XForms we consider a specific example: an
                        XForms Credit Card Verifier. This example displays a simple form asking
                        for a credit card number and related information to be entered, as shown on
                        the screenshot to the right. The information entered by the end-user is
                        validated by a set of rules and errors are flagged in red.
                    </p>
                    <p>
                        First, the information contained in the form is stored in an XML document
                        called an <i>XForms instance</i>, which is the skeleton or shell that will
                        contain the data captured by the form. You define an XForms instance within
                        an <code>xforms:instance</code>. In the Credit Card Verifier the unique
                        XForms instance is declared with:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:instance id="credit-card-instance">
                            <credit-card>
                                <type/>
                                <number/>
                                <expiration-month/>
                                <expiration-year/>
                                <verification-code/>
                                <valid/>
                            </credit-card>
                        </xforms:instance>
                    </xml-source>
                    <p>
                        The XForms instance does not have to be empty of data: it can contain
                        initial values for the form. Here we set the <code>valid</code> element to
                        the value "false" by default:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:instance id="credit-card-instance">
                            <credit-card>
                                <type/>
                                <number/>
                                <expiration-month/>
                                <expiration-year/>
                                <verification-code/>
                                <valid>false</valid>
                            </credit-card>
                        </xforms:instance>
                    </xml-source>
                    <p>
                        XForms instances are always contained in an <i>XForms model</i>, which:
                    </p>
                    <ol>
                        <li>
                            <p>Declares one or more XForms instance.</p>
                        </li>
                        <li>
                            <p>Optionally, declares a set of rules attached to the XForms instances.</p>
                        </li>
                        <li>
                            <p>Optionally, declares submissions.</p>
                        </li>
                    </ol>
                    <p>
                        At a minimum, the XForms instance above must be encapsulated as follows:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:model id="main-model">
                            <xforms:instance id="credit-card-instance">
                                <credit-card>
                                    <type/>
                                    <number/>
                                    <expiration-month/>
                                    <expiration-year/>
                                    <verification-code/>
                                    <valid>false</valid>
                                </credit-card>
                            </xforms:instance>
                        </xforms:model>
                    </xml-source>
                    <p>
                        Note that instances and models can have an optional <code>id</code>
                        attribute. If you have only one model and one instance, the id is optional,
                        but it becomes very convenient when more than one model or instance are
                        used.
                    </p>
                </section>
                <a name="xforms-mips"/>
                <section>
                    <title>Model Item Properties</title>
                    <p>
                        In addition to one or more XForms instances, an XForms model can declare a
                        set of "rules", called "model item properties". Let's write a set of rules
                        for the above Credit Card Validation form. Specifically we want to:
                    </p>
                    <ol>
                        <li><p>Check that the credit card number is a number and valid according to particular credit card rules </p></li>
                        <li><p>Check that the expiration month is valid (integer between 1 and 12)</p></li>
                        <li><p>Check that the expiration year is valid (4 digit number)</p></li>
                        <li><p>Display the "verification code" line only if the card type is Visa or MasterCard</p></li>
                        <li><p>Check that the verification code is valid only for Visa or MasterCard</p></li>
                    </ol>
                    <p>
                        You describe each one of those rules with an <code>&lt;xforms:bind></code>
                        element in the XForms model. Rules apply to elements and attributes in the
                        XForms instance. You specify the elements and attributes each rule applies
                        to with an XPath expression in the mandatory <code>nodeset</code> attribute.
                        In addition to the <code>nodeset</code> attribute you want to have at least
                        one attribute specifying the essence of the rule. We go over the all the
                        possible attributes later in this section, but first let's see how we can
                        express the above rules for the Credit Card Verifier form:
                    </p>
                    <ol>
                        <li>
                            <p>
                                You specify that the credit card number must be a number with:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:bind nodeset="number" type="xs:integer"/>
                            </xml-source>
                            <p>
                                The value of the <code>type</code> attribute is a W3C XML Schema
                                simple type. You can see the list of simple types in the <a href="
                                http://www.w3.org/TR/2001/REC-xmlschema-0-20010502/#CreatDt">XML
                                Schema primer</a>. If the end-user enters an invalid credit card
                                number (i.e. not a number), an error will be displayed as shows in
                                the screenshot on the right.
                            </p>
                        </li>
                        <li>
                            <p>
                                You can also constrain the value of an element or attribute with an
                                XPath expression in the <code>constraint</code> attribute. For
                                instance you specify that the expiration month must be an integer
                                between 1 and 12 with:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:bind nodeset="expiration-month" constraint=". castable as xs:integer and . >= 1 and 12 >= ."/>
                            </xml-source>
                            <p>
                                Note that we have decided here not to bother checking the expiration
                                month if no credit card number was entered.
                            </p>
                        </li>
                        <li>
                            <p>
                                Similarly, you check that the expiration year is a 4 digit number with:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:bind nodeset="expiration-year" constraint=". castable as xs:integer and string-length(.) = 4"/>
                            </xml-source>
                        </li>
                        <li>
                            <p>
                                You hide the "verification code" text field for American Express
                                cards with:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:bind nodeset="verification-code" relevant="../type = 'visa' or ../type = 'mastercard'"/>
                            </xml-source>
                            <p>
                                The attribute we use here is <code>relevant</code>. By default, everything is
                                relevant in the XForms instance. If a "relevant" rule is specified, the
                                XPath expression is evaluated for each node in the nodeset, and if the
                                expression returns false, then the node is not considered relevant. When
                                a node is not relevant, the corresponding widget is not displayed (more
                                on this later).
                            </p>
                        </li>
                        <li>
                            <p>
                                Finally, you check that the verification code is entered for Visa
                                and Mastercard:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:bind nodeset="verification-code"
                                    constraint="/credit-card/type = ('visa', 'mastercard') and . castable as xs:positiveInteger"/>
                            </xml-source>
                            <p>
                                Because the <code>verification-code</code> element has both a
                                <code>relevant</code> and a <code>constraint</code> attribute, we
                                combine them on the same <code>xforms:bind</code>:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:bind nodeset="verification-code" relevant="../type = 'visa' or ../type = 'mastercard'"
                                    constraint="/credit-card/type = ('visa', 'mastercard') and . castable as xs:positiveInteger"/>
                            </xml-source>
                        </li>
                    </ol>
                    <p>
                        XPath expressions in <code>xforms:bind</code> are by default relative to the
                        root element of the first XForms instance. This allows you to write the
                        first constraint above:
                    </p>
                    <ul>
                        <li>
                            <p>
                                Relatively to the root element of the first XForms instance:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:bind nodeset="number" type="xs:integer"/>
                            </xml-source>
                        </li>
                        <li>
                            <p>
                                With an absolute path in the first XForms instance:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:bind nodeset="/credit-card/number" type="xs:integer"/>
                            </xml-source>
                        </li>
                        <li>
                            <p>
                                Referring explicitly to the "credit-card-instance" using the
                                <code>instance()</code> function:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:bind nodeset="instance('credit-card-instance')/number" type="xs:integer"/>
                            </xml-source>
                        </li>
                    </ul>
                    <p>
                        Now that we have seen a few examples of model item properties, let's go over all
                        the XForms model item properties. Model item properties can essentially be used
                        for 3 purposes:
                    </p>
                    <table>
                        <tr>
                            <th>Validation</th>
                            <td>
                                <p>
                                    The purpose of validation is to determine if the content of an element or attribute
                                    in the XForms instance is valid. Invalid values can have an impact on how a form is
                                    displayed (you might want to highlight errors and show some information to help the
                                    end-user to correct the issue). Also, the XForms engine makes sure that invalid data
                                    cannot be submitted. There are 3 ways to validate the content of an element or
                                    attribute:
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            <b>required</b> &#8213; You can specify in the <code>required</code>
                                            attribute an XPath expression that determines if a value is required. The
                                            XPath can be as simple as <code>true()</code>, or more complex and depend on
                                            other values entered by the end-user. By default values are not required.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <b>type</b> &#8213; In the <code>type</code> attribute you can specify a
                                            W3C XML Schema simple type. The <code>type</code> attribute complements
                                            the <code>required</code> attribute, but applies separately.
                                        </p>
                                        <p>
                                            In Addition, some XML schema types have special behavior:
                                            <ul>
                                                <li>
                                                    <p>
                                                        <img src="../apps/doc/images/date-time.png"
                                                        class="ops-doc-image"/> <b><code>xs:date</code></b> &#8213; The
                                                        input field is complemented by a pop-up calendar. The user can
                                                        enter a date manually, or use the calendar to select a date in
                                                        the past or in the future. You can customize the calendar by
                                                        copying the files in orbeon-resources-public.jar under
                                                        ops/javascript/jscalendar to your resources directory. Your
                                                        modified files in the resources will have a precedence over
                                                        those found in orbeon-resources-public.jar.
                                                   </p>
                                                </li>
                                                <li>
                                                    <p>
                                                        <b><code>xs:time</code></b> &#8213; [TODO].
                                                   </p>
                                                </li>
                                                <li>
                                                    <p>
                                                        <b><code>xs:dateTime</code></b> &#8213; [TODO].
                                                   </p>
                                                </li>
                                            </ul>
                                        </p>
                                    </li>
                                    <li style="clear: both">
                                        <p>
                                            <b>constraint</b> &#8213; The <code>constraint</code> attribute supports
                                            any XPath expression that returns a boolean value. If <code>false()</code>
                                            is returned, then the value is considered invalid, otherwise it is
                                            considered valid.
                                        </p>
                                    </li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <th>Calculation</th>
                            <td>
                                <p>
                                    The purpose of calculations is to dynamically compute values. You do this with the
                                    <code>calculate</code> attribute:
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            <b>calculate</b> &#8213; The content of the element or attribute will be set
                                            to the result of the evaluation of the XPath expression in the
                                            <code>calculate</code> attribute. This way you can automatically compute
                                            some values in the XForms instance based on other values, typically entered
                                            by the end-user. By default, nodes that contain calculated values are
                                            read-only.
                                        </p>
                                    </li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <th>Visibility</th>
                            <td>
                                <p>
                                    In general XForms instance nodes are not read-only and are relevant, which means
                                    that if an XForms control is bound to that node (e.g. a text field), the control is
                                    displayed and is editable by the end-user. You can change this by providing XPath
                                    expressions in the <code>readonly</code> and <code>relevant</code> attributes:
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            <b>readonly</b> &#8213; If the XPath expression in <code>readonly</code>
                                            evaluates to true, the control will be displayed in non-editable mode.
                                            Typically, in an XHTML user interface only the current value is displayed,
                                            instead of displaying a form element, like a text field.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <b>relevant</b> &#8213; If the XPath expression in <code>relevant</code>
                                            evaluates to false, the control will not be displayed at all.
                                        </p>
                                    </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </section>
            </section>
            <a name="xforms-controls"/>
            <section>
                <title>XForms Controls</title>
                <a name="xforms-controls-list"/>
                <section>
                    <title>Available Controls</title>
                    <p>
                        XForms controls are similar to HTML form elements: they include text fields,
                        drop down lists, checkboxes, etc. These are some differences between HTML
                        forms elements and XForms controls:
                    </p>
                    <ul>
                        <li>
                            <p>
                                The value displayed by an XForms control comes from a node of the
                                XForms instance. When you declare a control, you bind it to a node
                                of your XForms instance with an XPath expression in the
                                <code>ref</code> attribute. For instance this text field a text
                                field is bound to the <code>&lt;number></code> element, which a
                                child of <code>&lt;credit-card></code>:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:input ref="/credit-card/number"/>
                            </xml-source>
                        </li>
                        <li>
                            <p>
                                The way a control is rendered depends on model item properties that
                                apply to the node the control is bound to: if it is bound to an
                                invalid node then an error can be displayed; if the control is bound
                                to a read-only node the value is displayed in read-only mode; if the
                                node is not relevant the control isn't be displayed at all; if the
                                control is bound to a non-existing node, the control is considered
                                non-relevant and is not displayed;
                            </p>
                        </li>
                    </ul>
                    <p>
                        The table below lists all the available XForms controls and shows for each one
                        the XML you need to use in your view, as well as an example showing that
                        control in action.
                    </p>
                    <table>
                        <tr>
                            <th>Control</th>
                            <th>XForms in the view</th>
                            <th>Example</th>
                        </tr>
                        <tr>
                            <td>
                                <a name="xforms-input-control"/>
                                <b>Text field</b>
                                <img src="../apps/doc/images/reference-xforms-input.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:input ref="text"/>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <a name="xforms-secret-control"/>
                                <b>Password field</b>
                                <img src="../apps/doc/images/reference-xforms-secret.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:secret ref="secret"/>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <a name="xforms-textarea-control"/>
                                <b>Text area</b>
                                <img src="../apps/doc/images/reference-xforms-textarea.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:textarea ref="textarea"/>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Radio buttons</b>
                                <img src="../apps/doc/images/reference-xforms-radio.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:select1 ref="carrier" appearance="full">
                                        <xforms:item>
                                            <xforms:label>Fedex</xforms:label>
                                            <xforms:value>fedex</xforms:value>
                                        </xforms:item>
                                        <xforms:item>
                                            <xforms:label>UPS</xforms:label>
                                            <xforms:value>ups</xforms:value>
                                        </xforms:item>
                                    </xforms:select1>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Single-selection lists</b>
                                <img src="../apps/doc/images/reference-xforms-select1-compact.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:select1 ref="carrier" appearance="compact">
                                        <xforms:item>
                                            <xforms:label>Fedex</xforms:label>
                                            <xforms:value>fedex</xforms:value>
                                        </xforms:item>
                                        <xforms:item>
                                            <xforms:label>UPS</xforms:label>
                                            <xforms:value>ups</xforms:value>
                                        </xforms:item>
                                    </xforms:select1>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Combo box</b>
                                <img src="../apps/doc/images/reference-xforms-combobox.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:select1 ref="payment" appearance="minimal">
                                        <xforms:item>
                                            <xforms:label>Cash</xforms:label>
                                            <xforms:value>cash</xforms:value>
                                        </xforms:item>
                                        <xforms:item>
                                            <xforms:label>Credit</xforms:label>
                                            <xforms:value>credit</xforms:value>
                                        </xforms:item>
                                    </xforms:select1>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Autocomplete box</b>
                                <img src="../apps/doc/images/reference-xforms-autocomplete.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:select1 ref="name" selection="open" incremental="true" appearance="xxforms:autocomplete">
                                        <xforms:label class="label">Name: </xforms:label>
                                        <xforms:itemset nodeset="instance('countries-name')/country">
                                            <xforms:label ref="name"/>
                                            <xforms:value ref="name"/>
                                        </xforms:itemset>
                                    </xforms:select1>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-autocomplete/">Auto-Complete</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Checkboxes</b>
                                <img src="../apps/doc/images/reference-xforms-checkbox.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:select ref="wrapping" appearance="full">
                                        <xforms:choices>
                                            <xforms:item>
                                                <xforms:label>Hard-box</xforms:label>
                                                <xforms:value>box</xforms:value>
                                            </xforms:item>
                                            <xforms:item>
                                                <xforms:label>Gift</xforms:label>
                                                <xforms:value>gift</xforms:value>
                                            </xforms:item>
                                        </xforms:choices>
                                    </xforms:select>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>List</b>
                                <img src="../apps/doc/images/reference-xforms-list.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:select ref="taste" appearance="compact">
                                        <xforms:item>
                                            <xforms:label>Vanilla</xforms:label>
                                            <xforms:value>vanilla</xforms:value>
                                        </xforms:item>
                                        <xforms:item>
                                            <xforms:label>Strawberry</xforms:label>
                                            <xforms:value>strawberry</xforms:value>
                                        </xforms:item>
                                    </xforms:select>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Trigger button</b>
                                <img src="../apps/doc/images/reference-xforms-trigger-button.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:trigger>
                                        <xforms:label>Add carrier</xforms:label>
                                    </xforms:trigger>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                        <!-- TODO: show other apperances for trigger -->
                        <tr>
                            <td>
                                <b>Submit button</b>
                                <img src="../apps/doc/images/reference-xforms-submit-button.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:submit submission="main-submission">
                                        <xforms:label>Submit</xforms:label>
                                    </xforms:submit>
                                </xml-source>
                            </td>
                            <td>
                                -
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Submit link</b>
                                <img src="../apps/doc/images/reference-xforms-submit-link.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:submit submission="main-submission" appearance="minimal">
                                        <xforms:label>Submit</xforms:label>
                                    </xforms:submit>
                                </xml-source>
                            </td>
                            <td>
                                -
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Submit image</b>
                                <img src="../apps/doc/images/reference-xforms-submit-image.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:submit submission="main-submission" appearance="minimal">
                                        <xforms:label>
                                            <xhtml:img src="images/submit.gif" alt="Submit"/>
                                        </xforms:label>
                                    </xforms:submit>
                                </xml-source>
                            </td>
                            <td>
                                -
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Upload</b>
                                <img src="../apps/doc/images/reference-xforms-upload-image.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:upload ref="files/file[1]">
                                        <xforms:filename ref="@filename"/>
                                        <xforms:mediatype ref="@mediatype"/>
                                        <xxforms:size ref="@size"/>
                                    </xforms:upload>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-upload/">Upload Control</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Range</b>
                                <img src="../apps/doc/images/reference-xforms-range.png"/>
                            </td>
                            <td>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:range ref="range/value">
                                        <xforms:send submission="countries-submission" ev:event="xforms-value-changed"/>
                                    </xforms:range>
                                </xml-source>
                            </td>
                            <td>
                                <a href="/xforms-controls/">XForms Controls</a>
                            </td>
                        </tr>
                    </table>
                    <p>
                        In the examples above, the labels and values for the <code>select</code> and
                        <code>select1</code> controls are declared in the control element with
                        multiple <code>&lt;xforms:item></code> elements. Alternatively the
                        label/value pairs can be pulled out from the instance. You do this with an
                        <code>&lt;xforms:itemset></code> element (instead of
                        <code>&lt;xforms:item></code> elements):
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:select1 ref="country" appearance="compact">
                            <xforms:itemset nodeset="instance('countries')/country">
                                <xforms:label ref="name"/>
                                <xforms:value ref="us-code"/>
                            </xforms:itemset>
                        </xforms:select1>
                    </xml-source>
                </section>
                <a name="xforms-label-alert-help-hint"/>
                <section>
                    <title>Label, Alert, Help, and Hint</title>
                    <p>
                        Nested inside each XForms control element, you can specify additional elements that can alter
                        the way the control is displayed. The table below lists those elements:
                    </p>
                    <table>
                        <tr>
                            <th>Label</th>
                            <td>
                                <img src="../apps/doc/images/reference-xforms-submit-button.png"/>
                            </td>
                            <td>
                                <p>
                                    The <code>label</code> element is mandatory for all controls.
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <th>Alert</th>
                            <td>
                                <img src="../apps/doc/images/reference-xforms-alert.png"/>
                            </td>
                            <td>
                                <p>
                                    In each control you can specify an error message that can be displayed if the value
                                    entered by the user triggers a validation error.
                                </p>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:secret ref="secret">
                                        <xforms:alert>Invalid password</xforms:alert>
                                    </xforms:secret>
                                </xml-source>
                            </td>
                        </tr>
                        <tr>
                            <th>Hint</th>
                            <td>
                                <img src="../apps/doc/images/reference-xforms-hint.png"/>
                            </td>
                            <td>
                                <p>
                                    You can specify a hint on each control, which shows up as a hint when users mouse
                                    over the control.
                                </p>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:textarea ref="textarea">
                                        <xforms:hint>Enter at least 11 characters</xforms:hint>
                                    </xforms:textarea>
                                </xml-source>
                            </td>
                        </tr>
                        <tr>
                            <th>Help</th>
                            <td>
                                <img src="../apps/doc/images/reference-xforms-help.png"/>
                            </td>
                            <td>
                                <p>
                                    If you specify a help message for a control, an icon with a question mark is
                                    displayed next to the control. When users click on the help icon, a dialog is
                                    displayed with the help message. The <code>&lt;xforms:help></code> can contain
                                    XHTML, or if you bind it to a node, the node can contain escaped XHTML.
                                </p>
                                <xml-source border="false" show-namespaces="false">
                                    <xforms:input ref="date" class="xforms-date">
                                        <xforms:label class="fixed-width">Birth date:</xforms:label>
                                        <xforms:help>
                                            <div>
                                                <p>
                                                    This field must contain:
                                                </p>
                                                <ul>
                                                    <li>a valid date</li>
                                                    <li>which is at most one day in the future</li>
                                                </ul>
                                            </div>
                                        </xforms:help>
                                    </xforms:input>
                                </xml-source>
                                <p>
                                    The help dialog has a default with of 300px defined in <code>xforms.js</code>. To
                                    use a different width, override this default with:
                                </p>
                                <p>
                                    <code>.xforms-help-panel { width: 600px; }</code>
                                </p>
                                <p>
                                    By default, the help dialog will stretch vertically as needed so all the text in
                                    your help is visible. Then users can use the browser vertical scrollbar to
                                    navigate through the text. If instead you want the dialog to have a fixed height and
                                    scrollbars inside the dialog when the text doesn't fit that height, use CSS as in:
                                </p>
                                <p>
                                    <code>.xforms-help-panel .bd { height: 300px; overflow: auto; }</code>
                                </p>
                            </td>
                        </tr>
                    </table>
                    <p>
                        In the examples above, the text displayed is directly in the <code>&lt;xforms:label></code>,
                        <code>&lt;xforms:alert></code>, <code>&lt;xforms:help></code>, or <code>&lt;xforms:hint></code>
                        element. Alternatively that text can come from an XForms instance by using a <code>ref</code>
                        attribute on any one of those elements. The <code>ref</code> references a node in the instant
                        that contains the text to use. This is useful to externalize resources:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:secret ref="secret">
                            <xforms:alert ref="@alert"/>
                        </xforms:secret>
                    </xml-source>
                    <p>
                        Alternatively, you can nest <code>xforms:output</code> elements:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:secret ref="secret">
                            <xforms:hint><xforms:output value="instance('resources')/help/secret"/></xforms:hint>
                        </xforms:secret>
                    </xml-source>
                    <p>
                        With <code>xforms:help</code> and <code>xforms:hint</code>, you can also produce HTML, in two
                        different ways:
                    </p>
                    <ul>
                        <li>
                            <p>
                                By using literal XHTML under <code>xforms:help</code> or <code>xforms:hint</code>:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:input ref="number">
                                    <xforms:label>Number</xforms:label>
                                    <xforms:help>
                                        <div>
                                            <p>
                                                This field must contain one of the following values:
                                            </p>
                                            <ul>
                                                <li>One</li>
                                                <li>Two</li>
                                                <li>Three</li>
                                            </ul>
                                        </div>
                                    </xforms:help>
                                </xforms:input>
                            </xml-source>
                            <note>
                                <p>
                                    Elements in the XHTML namespace and in no namespace are supported.
                                </p>
                            </note>
                        </li>
                        <li>
                            <p>
                                By using a nested <code>xforms:output</code> with a <code>text/html</code> mediatype:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:input ref="number">
                                    <xforms:label>Number</xforms:label>
                                    <xforms:help><xforms:output mediatype="text/html" ref="instance('resources')/help/number"/></xforms:help>
                                </xforms:input>
                            </xml-source>
                            <p>
                                In this case, the node pointed to by the <code>ref</code> attribute must contain escaped HTML:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:instance id="resources">
                                    <resources>
                                        <help>
                                            <number>
                                                &amp;lt;div>&amp;lt;p>This field must contain one of the following values:&amp;lt;/p>
                                                &amp;lt;ul>&amp;lt;li>One&amp;lt;/li> &amp;lt;li>Two&amp;lt;/li>
                                                &amp;lt;li>Three&amp;lt;/li>&amp;lt;/ul>&amp;lt;/div>
                                            </number>
                                        </help>
                                    </resources>
                                </xforms:instance>
                            </xml-source>
                            <p>
                                If you want to have literal XHTML instead of escaped HTML in your resources, you can use
                                the <code>value</code> attribute on <code>xforms:output</code> and the
                                <code>xxforms:serialize</code> extension function:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:input ref="number">
                                    <xforms:label>Number</xforms:label>
                                    <xforms:help><xforms:output mediatype="text/html" value="xxforms:serialize(instance('resources')/help/number/*, 'html')"/></xforms:help>
                                </xforms:input>
                            </xml-source>
                            <p>
                                In this case, the resources instance contains:
                            </p>
                            <xml-source show-namespaces="false">
                                <xforms:instance id="resources">
                                    <resources>
                                        <help>
                                            <number>
                                                <div>
                                                    <p>
                                                        This field must contain one of the following values:
                                                    </p>
                                                    <ul>
                                                        <li>One</li>
                                                        <li>Two</li>
                                                        <li>Three</li>
                                                    </ul>
                                                </div>
                                            </number>
                                        </help>
                                    </resources>
                                </xforms:instance>
                            </xml-source>
                        </li>
                    </ul>
                    <p>
                        You can mix and match literal XHTML and <code>xforms:output</code>
                    </p>
                </section>
                <a name="xforms-upload"/>
                <section>
                    <title>Upload</title>
                    <p>
                        XForms allows you to upload files with the XForms Upload control:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:upload ref="files/file[1]">
                            <xforms:filename ref="@filename"/>
                            <xforms:mediatype ref="@mediatype"/>
                            <xxforms:size ref="@size"/>
                        </xforms:upload>
                    </xml-source>
                    <p>
                        The related section of the XForms model can look like this:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:instance id="my-instance">
                            <files>
                                <file filename="" mediatype="" size=""/>
                            </files>
                        </xforms:instance>
                        <xforms:bind nodeset="file" type="xs:anyURI"/>
                    </xml-source>
                    <p>
                        The <code>file</code> element is the element storing the result of the file
                        upload. The result can be stored in two ways:
                    </p>
                    <ul>
                        <li>As a URL, by specifying the type <code>xs:anyURI</code>.</li> <li>As
                        Base64-encoded text, by specifying the type <code>xs:base64Binary</code>.
                        Base64 is a mechanism to encode any binary data using a 65-character subset
                        of US-ASCII. Using this mechanism allows embedding binary data into XML
                        documents, at the typical cost of taking 50% more space than the original
                        binary data. For more information, please refer to the <a
                        href="http://www.ietf.org/rfc/rfc2045.txt">RFC</a>.</li>
                    </ul>
                    <p>
                        The optional <code>xforms:filename</code>, <code>xforms:mediatype</code>, and
                        <code>xxforms:size</code> (the latter being an extension) allow storing metadata
                        about an uploaded file:
                    </p>
                    <ul>
                        <li>
                            <code>xforms:filename</code>: stores the file name sent by the user agent</li>
                        <li>
                            <code>xforms:mediatype</code>: store the media type sent by the user agent</li>
                        <li>
                            <code>xxforms:size</code>: stores the actual size in bytes of the uploaded data</li>
                    </ul>
                    <p>
                        Note that the file name and the media type are provided by the user agent
                        (typically a web browser) and are not guaranteed to be correct.
                    </p>
                    <p>
                        The result of a file upload can look as follows when using
                        <code>xs:anyURI</code>:
                    </p>
                    <xml-source show-namespaces="false">
                        <file filename="photo.jpg" mediatype="image/jpeg" size="2345">file:/C:/Tomcat/temp/upload_00000005.tmp</file>
                    </xml-source>
                    <note>
                        <p>
                            The URL stored as the value of the upload is temporary and only valid until either:
                        </p>
                        <ul>
                            <li>
                                the session expires,
                            </li>
                            <li>
                                the Java VM quits,
                            </li>
                            <li>
                                or a new file upload replaces the existing URI in the XForms instance.
                            </li>
                        </ul>
                        <p>
                            The URL is only accessible from the server side, and will not be accessible from a client
                            such as a web browser. It is not guaranteed to be a <code>file:</code> URL, only that it can
                            be read with Orbeon Forms's <a href="processors-generators-url">URL generator</a>.
                        </p>
                    </note>
                    <p>
                        The contents of the file can be retrieved using the URL Generator. The result
                        will be an XML document containing a single root element containing the uploaded
                        file in Base64-encoded text.
                    </p>
                    <note>
                        <p>
                            Using the <code>xs:anyURI</code> type allows Orbeon Forms to make sure the uploaded file
                            does not have to reside entirely in memory. This is the preferred method for uploading large
                            files.
                        </p>
                    </note>
                    <p>
                        The result of a file upload can look as follows when using
                        <code>xs:base64Binary</code>:
                    </p>
                    <xml-source>
                        <file filename="photo.jpg" mediatype="image/jpeg" size="2345">
                            /9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAQDAwQDAwQEBAQFBQQFBwsHBwYGBw4KCggLEA4RERAO
                            EA8SFBoWEhMYEw8QFh8XGBsbHR0dERYgIh8cIhocHRz/2wBDAQUFBQcGBw0HBw0cEhASHBwcHBwc
                            ...
                        </file>
                    </xml-source>
                    <p>
                        In this case, the uploaded file is encoded an directly embedded into the XML
                        instance. This is a good method to handle small files only, because the entire
                        file is converted and stored in memory.
                    </p>
                </section>
            </section>
            <a name="xforms-repeat"/>
            <section>
                <title>Repeating with <code>&lt;xforms:repeat></code></title>
                <p>
                    This section has <a
                    href="http://wiki.orbeon.com/forms/doc/xforms-repeat">migrated
                    to the wiki</a>.
                </p>
            </section>
            <a name="xforms-events"/>
            <a name="events-intro"/>
            <a name="events-observer"/>
            <a name="events-observer-target"/>
            <section>
                <title>Events</title>
                <p>
                    This section has <a
                    href="http://wiki.orbeon.com/forms/doc/developer-guide/xforms-events#TOC-Orbeon-Forms-support">migrated
                    to the wiki</a>.
                </p>
            </section>
            <a name="xforms-actions"/>
            <section>
                <title>Actions</title>
                <a name="xforms-setvalue"/>
                <section>
                    <title>Setting Instance Values with the <code>xforms:setvalue</code> Action</title>
                    <p>
                        There are two ways of providing the value to set with
                        <code>&lt;xforms:setvalue></code>. The first one specifies the value as a
                        literal enclosed in the <code>&lt;xforms:setvalue></code> element. The
                        second possibility uses the <code>value</code> attribute: the content of the
                        attribute is an XPath expression evaluated in the context of the node the
                        <code>xforms:setvalue</code> element is bound (through the <code>ref</code>
                        attribute). The content of the node pointed to by the <code>ref</code>
                        attribute will be set with the result of the XPath expression provided in
                        the <code>value</code> attribute. The example below and uses two
                        <code>&lt;xforms:setvalue></code>, each one providing the new value in a
                        different way.
                    </p>
                    <xml-source>
                        <xforms:trigger>
                            <xforms:label>Submit</xforms:label>
                            <xforms:action ev:event="DOMActivate">
                                <xforms:setvalue ref="clicked">my-button</xforms:setvalue>
                                <xforms:setvalue ref="flavor" value="concat('van', 'illa')"/>
                            </xforms:action>
                        </xforms:trigger>
                    </xml-source>
                </section>
                <a name="xforms-message"/>
                <section>
                    <title>Displaying Messages with the <code>xforms:message</code> Action</title>
                    <img src="../apps/doc/images/reference-xforms-message.png" class="ops-doc-image"/>
                    <p>
                        The XForms message action (<code>xforms:message</code>) displays a message to the user.
                        The message to render can be specified in different ways, in order of precedence:
                    </p>
                    <ul>
                        <li>Binding attributes (<code>ref</code> or <code>bind</code>)</li>
                        <li>Linking attribute (<code>src</code>)</li>
                        <li>Inline content, including optional <code>xforms:output</code> elements</li>
                    </ul>
                    <p>
                        <code>xforms:message</code> supports the following values on the <code>level</code> attribute:
                    </p>
                    <ul>
                        <li>
                            <p>
                                <code>modal</code>. This standard level specifies taht the message needs to be closed
                                by the user before any further interaction can take place with the form.
                            </p>
                        </li>
                        <li>
                            <p>
                                <code>xxforms:log-debug</code>, <code>xxforms:log-info</code>,
                                <code>xxforms:log-warn</code> and <code>xxforms:log-error</code>. These values cause the
                                message to be logged on the server using the levels "debug", "info", "warn" and "error"
                                as per the log4j terminology. Messages output with these levels appear in the
                                Orbeon Forms logs depending on the configuration of <code>log4j.xml</code>.
                            </p>
                        </li>
                    </ul>
                    <p>
                        The <code>level</code> is optional and defaults to <code>modal</code>.
                    </p>
                    <note>
                        <p>When using the linking attribute (<code>src</code>), the value must be an absolute URL,
                        starting with <code>oxf:</code>, <code>http:</code> or other supported protocols. It is not
                        recommended to use the <code>src</code> attribute to specify the content of the message.</p>
                    </note>
                    <p>
                        Simple message:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:trigger>
                            <xforms:label>Test</xforms:label>
                            <xforms:message ev:event="DOMActivate" ref="taste"/>
                        </xforms:trigger>
                    </xml-source>
                    <p>
                        Message with nested <code>xforms:output</code>:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:trigger>
                            <xforms:label>Test</xforms:label>
                            <xforms:message ev:event="DOMActivate" level="modal">
                                This is your first name:
                                <xforms:output value="first-name"/>
                            </xforms:message>
                        </xforms:trigger>
                    </xml-source>
                    <p>
                        Server-side log message:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:submission>
                            ...
                            <xforms:message ev:event="xforms-submit-error" level="xxforms:log-error">
                                A submission error occurred:
                                <xforms:output value="event('error-type')"/>
                            </xforms:message>
                        </xforms:submission>
                    </xml-source>
                </section>
            </section>
            <!-- This was migrated to http://wiki.orbeon.com/forms/doc/developer-guide/configuration-properties
            <a name="xforms-submission"/>
            <section>
                <title>Submission</title>
                <p>
                    Two properties control some aspects of XForms submission in Orbeon Forms:
                </p>
                <xml-source>
                    <property as="xs:boolean" name="optimize-get-all" value="true"/>
                </xml-source>
                <p>
                    If set to <code>true</code> (the default), Orbeon Forms optimizes submissions with
                    <code>replace="all"</code> and the <code>get</code> method by sending URL of the submission action
                    directly to the web browser. This however means that submission errors cannot be caught by XForms
                    event handlers after Orbeon Forms has started connecting to the submission URL, as should be the
                    case following the XForms specification. If set to <code>false</code>, Orbeon Forms buffers the
                    reply so that errors can be handled as per XForms. However, this solution is less efficient.
                </p>
                <xml-source>
                    <property as="xs:boolean" name="oxf.xforms.oxf.xforms.local-submission-forward" value="true"/>
                </xml-source>
                <ul>
                    <li>
                        If set to <code>true</code> (the default), Orbeon Forms optimizes "local"
                        (i.e. submissions performed to a URL controlled by Orbeon Forms itself)
                        submissions with <code>replace="all"</code>, by
                        using the Java Servlet API's forward capability instead of actually performing an HTTP request.
                    </li>
                    <li>
                        If set to <code>false</code>, Orbeon Forms always always uses the HTTP or HTTPS protocol, which
                        is less efficient.
                    </li>
                </ul>
                <xml-source>
                    <property as="xs:boolean" name="oxf.xforms.oxf.xforms.local-submission-include" value="true"/>
                </xml-source>
                <ul>
                    <li>
                        If set to <code>true</code> (the default is <code>false</code>), Orbeon Forms optimizes "local"
                        (i.e. submissions performed to a URL controlled by Orbeon Forms itself)
                        submissions with <code>replace="instance"</code>, <code>replace="text"</code> or <code>replace="none"</code>,
                        by directly
                        using the Java Servlet API's include capability instead of actually performing an HTTP request.
                    </li>
                    <li>
                        If set to <code>false</code>, Orbeon Forms always always uses the HTTP or HTTPS protocol, which
                        is less efficient.
                    </li>
                </ul>
            </section>
            -->
            <!--
            <a name="xforms-switch"/>
            <section>
                <title>The XForms Switch Module</title>
                <p>
                    TODO
                </p>
            </section>
            -->
        </section>
        <!-- TODO -->
        <!--<a name="xforms-xpath"/>-->
        <!--<section>-->
            <!--<title>XPath Expressions in XForms</title>-->
        <!--</section>-->
        <a name="xforms-schema-validation"/>
        <section>
            <title>Validation with XML Schema</title>
            <p>
                [TODO: document schema validation including basics, extensions, inline schemas]
            </p>
        </section>
        <a name="xforms-initialization"/>
        <section>
            <title>XForms Initialization</title>
            <p>
                Upon loading, an XForms document goes through a phase of initialization during which models, instances
                and controls are created and prepared.
            </p>
            <p>
                As a form author, you can hook-up event handlers to perform your own initialization. You usually do this
                with either the <code>xforms-model-construct-done</code> or <code>xforms-ready</code> events dispatched
                to each model.
            </p>
            <p>
                In many cases, you can use either event, but there is a significant difference: when
                <code>xforms-model-construct-done</code> runs, controls are not yet initialized, and you may obtain
                better performance when using that event, as controls don't have to update as a response to  actions.
            </p>
            <p>
                Here are a few things you can do during initialization:
            </p>
            <ul>
                <li>
                    <p>
                        <b>Call submissions to load data.</b> For example, you may want to load initial form data from
                        a database, or load localization resources.
                    </p>
                    <xml-source>
                        <xforms:model>
                            <xforms:send ev:event="xforms-model-construct-done" submission="load-submission"/>
                            ...
                        </xforms:model>
                    </xml-source>
                </li>
                <li>
                    <p>
                        <b>Prepare data.</b> For example, you may want to perform initial calculations.
                    </p>
                    <xml-source>
                        <xforms:model>
                            <xforms:setvalue ev:event="xforms-model-construct-done" ref="uuid" value="digest(string(random(true)), 'MD5', 'hex')"/>
                            ...
                        </xforms:model>
                    </xml-source>
                </li>
            </ul>
        </section>
        <a name="xforms-instance-initialization"/>
        <section>
            <title>XForms Instance Initialization</title>
            <section>
                <title>Rationale</title>
                <p>
                    An XForms page usually needs to contain initial data when first loaded. The data may be inline, come
                    from a database, from a form submitted on a previous page, etc. This section looks at the different
                    ways to initialize XForms instances.
                </p>
            </section>
            <a name="xforms-instance-initialization-recommended"/>
            <section>
                <title>Recommended methods</title>
                <p>
                    See <a href="http://wiki.orbeon.com/forms/how-to/load-initial-form-data">the Orbeon Forms wiki</a>
                    for a guide to initializing instances.
                </p>
            </section>
            <a name="xforms-instance-initialization-pfc"/>
            <section>
                <title>Initializing XForms Instances from the PFC</title>
                <section>
                    <title>Page Flow Definitions</title>
                    <p>
                        The Page Flow Controller supports an MVC architecture that allows pages to be built with a
                        page model and a page view. The page model is in charge of preparing data then sent to the page
                        view for display. Assume the following definitions in your page flow, with a page model and
                        either a static page view:
                    </p>
                    <xml-source>
                        <page id="..." path-info="..." model="my-page-model.xpl" view="my-page-view.xhtml"/>
                    </xml-source>
                    <p>
                        Or a dynamic XSLT page view:
                    </p>
                    <xml-source>
                        <page id="..." path-info="..." model="my-page-model.xpl" view="my-page-view.xsl"/>
                    </xml-source>
                    <p>
                        As always with Orbeon Forms, the page model produces a page model document on its
                        <code>data</code> output, and the page view can access this document on its <code>data</code>
                        input, as shown in the following sections. The page view also has access on its
                        <code>instance</code> input to the current XML submission, which may be an unmodified submission
                        performed on the page (in case the page model doesn't have an <code>instance</code> output), or
                        a submission created or modified by the page model and produced on its <code>instance</code>
                        output. These mechanisms are described in details in the <a
                        href="reference-page-flow#page-model-page-view">PFC documentation</a>.
                    </p>
                </section>
                <a name="xforms-instance-initialization-xinclude"/>
                <section>
                    <title>Using XInclude</title>
                    <p>
                        In this scenario, the PFC page model generates an XML document which contains an XForms
                        instance on its <code>data</code> output. A static PFC page view then includes this document
                        using <code>xi:include</code>, as follows:
                    </p>
                    <xml-source show-namespaces="false" xmlns:xi="dummy">
                        <html xmlns:xforms="http://www.w3.org/2002/xforms"
                              xmlns="http://www.w3.org/1999/xhtml">
                            <head>
                                <title>Summary</title>
                                <xforms:model>
                                    <xforms:instance id="document-infos-instance">
                                        <comment xmlns=""> This is where the XML document produced by the page model is included </comment>
                                        <xi:include href="input:data"/>
                                    </xforms:instance>
                                    ...
                                </xforms:model>
                            </head>
                            <body>
                                ...
                            </body>
                        </html>
                    </xml-source>
                    <p>
                        The use of the URI <code>input:data</code> instructs XInclude processing to dynamically include the
                        <code>data</code> output of the page view, which is produced on the <code>data</code> output of the
                        page model. Note that you can also use the <code>instance</code> input, which then refers to the
                        current XML submission:
                    </p>
                    <xml-source show-namespaces="false" xmlns:xi="dummy">
                        <xforms:instance id="document-infos-instance">
                            <comment xmlns=""> This is where the XML document produced by the page model is included </comment>
                            <xi:include href="input:instance"/>
                        </xforms:instance>
                    </xml-source>
                    <note>
                        <p>
                            Whenever possible, the use of the <code>&lt;xforms:instance></code>'s <code>src</code>
                            attribute is preferable. Doing so may have a positive impact on performance as more caching
                            can take place.
                        </p>
                    </note>
                </section>
                <a name="xforms-instance-initialization-xslt"/>
                <section>
                    <title>Using XSLT</title>
                    <p>
                        You can use a dynamic XSLT page view to perform the inclusion of the instance. XSLT is more
                        flexible than XInclude, but less efficient at runtime. The following example uses the
                        <code>data</code> input of the page view to initialize an XForms instance:
                    </p>
                    <xml-source show-namespaces="false">
                        <html xmlns:xforms="http://www.w3.org/2002/xforms"
                              xmlns="http://www.w3.org/1999/xhtml"
                              xsl:version="2.0">
                            <head>
                                <title>Summary</title>
                                <xforms:model>
                                    <xforms:instance id="document-infos-instance">
                                        <comment xmlns=""> This is where the XML document produced by the page model is included </comment>
                                        <xsl:copy-of select="/*"/>
                                    </xforms:instance>
                                    ...
                                </xforms:model>
                            </head>
                            <body>
                                ...
                            </body>
                        </html>
                    </xml-source>
                    <p>
                        Note the use of <code>xsl:version="2.0"</code> on the root element of the document, which instructs
                        the PFC to process the page view as an XSLT stylesheet.
                    </p>
                    <p>
                        The following example uses instead the <code>instance</code> input of the page view to
                        initialize an XForms instance:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:instance id="document-infos-instance">
                            <comment xmlns=""> This is where the XML document produced by the page model is included </comment>
                            <xsl:copy-of select="doc('input:instance')"/>
                        </xforms:instance>
                    </xml-source>
                    <p>
                        The use of the XPath <code>doc()</code> function with a URI <code>input:instance</code>
                        instructs XSLT processing to dynamically include the <code>instance</code> input of the page
                        view.
                    </p>
                    <note>
                        You can use XInclude instructions in a dynamic XSLT page view as well. In this case, it is
                        important to note that XInclude instructions are processed before XSLT instructions, i.e. the result
                        of XInclude instructions is an XSLT stylesheet, which is then executed.

                        <!--[TODO: Figure showing XInclude -> XSLT processing.]-->
                    </note>
                    <note>
                        <p>
                            Whenever possible, the use of the <code>&lt;xforms:instance></code>'s <code>src</code>
                            attribute is preferable. Doing so may have a positive impact on performance as more caching
                            can take place. For performance reasons, we also recommend using static XHTML views instead
                            of XSLT whenever possible.
                        </p>
                    </note>
                </section>
            </section>
        </section>
        <!--
        <section>
            <title>XSLT or XForms?</title>
            <p>
                There are some similarities between XSLT and XForms. XSLT can be used to extract
                data from an XML document, format it, and output it with <code>xsl:value-of</code>.
                XForms can do the same using <code>xforms:output</code>.
            </p>
            <p>
                TODO
            </p>
        </section>
        -->
        <a name="xforms-urls"/>
        <section>
            <title>URLs in XForms</title>
            <p>
                This section has <a
                href="http://wiki.orbeon.com/forms/doc/developer-guide/url-rewriting">moved to the Orbeon
                Forms wiki</a>.
            </p>
        </section>
        <!--
        <section>
            <title>Labels, Hints, Alerts, Help Messages</title>
            <p>
                TODO: explain purpose, styling, content allowed (xforms:output), and when e.g.
                labels should not be used.
            </p>
        </section>
        -->
        <!--
        <section>
            <title>Using XML Schema for Validation</title>
            <p>
                TODO: basics, additional XForms constraints, tips for repeating elements
            </p>
        </section>
        -->
        <section>
            <title>XForms and Services</title>
            <section>
                <title>Introduction</title>
                <p>
                    XForms allows an XForms page to perform submissions of XForms instances and to handle a response.
                    In most cases, both the submitted XForms instance and the response are XML documents.
                </p>
                <note>
                    It is possible to submit an XForms instance with the HTTP GET method. In that case, some
                    information contained in the XML document is lost, as the structure of the instance, attributes, and
                    namespace prefixes among others, are not passed to the submission.
                </note>
                <p>
                    The XForms submission feature practically allows forms to call XML services. Those services are
                    accessible through an XML API, which means that a request is performed by sending an XML document to
                    the service, and a response consists of an XML document as well.
                </p>
            </section>
            <!--
            <section>
                <title>Calling Services</title>
                <p>
                    TODO
                </p>
            </section>
            <section>
                <title>Handling Responses</title>
                <p>
                    TODO
                </p>
            </section>
            <section>
                <title>Implementing Services with Orbeon Forms</title>
                <p>
                    TODO
                </p>
            </section>
            <section>
                <title>Page Flow Controller (PFC) Best Practices</title>
                <p>
                    TODO
                </p>
            </section>
            -->
        </section>
        <a name="xforms11-extensions"/>
        <a name="xforms11"/>
        <section>
            <title>XForms 1.1 Support</title>
            <a name="output-mediatype"/>
            <section>
                <title>Media Type for <code>&lt;xforms:output></code></title>
                <p>
                    In XForms 1.0, <code>xforms:output</code> is only used to display text. However, XForms 1.1 supports
                    a <code>mediatype</code> attribute on that element allowing display of other media types.
                </p>
                <a name="xforms-image-mediatype"/>
                <section>
                    <title>Image Types</title>
                    <p>
                         For the <code>&lt;xforms:output></code> control to display an image, you
                         need to:
                    </p>
                    <ul>
                        <li>
                            <p>
                                Have a <code>mediatype</code> attribute on the <code>&lt;xforms:output></code>. That
                                attribute must refer to an image mediatype, such as <code>image/*</code> or
                                <code>image/jpeg</code>.
                            </p>
                        </li>
                       <li>
                            <p>
                                Use the <code>value</code> attribute on <code>&lt;xforms:output></code> or bind to the
                                control to a node without type, with an <code>xs:anyURI</code> type or with an
                                <code>xs:base64Binary</code> type.
                            </p>
                        </li>
                   </ul>
                    <p>
                        The resulting value from the instance is interpreted either as a URI pointing to an image, or as
                        a base64-encoded binary representation of the image. The image will display in place of the
                        <code>xforms:output</code>. It is possible to dynamically change the image pointed to. For
                        example:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:output mediatype="image/*" value="'/images/moon.jpg'"/>
                    </xml-source>
                    <xml-source show-namespaces="false">
                        <xforms:model>
                            <xforms:instance>
                                <image-uri/>
                            </xforms:instance>
                            <xforms:bind nodeset="image-uri" type="xs:anyURI"/>
                        </xforms:model>
                        ...
                        <xforms:output mediatype="image/*" ref="image-uri"/>
                    </xml-source>
                    <p>
                        The image URI may or may no be reachable from the client browser. Orbeon Forms hides this from
                        the developer. For example, to upload and show an image:
                    </p>
                    <xml-source>
                        <comment> Hide xforms:output when there is no URI available </comment>
                        <xforms:group ref="image[normalize-space() != '']">
                            <comment> Image output </comment>
                            <xforms:output ref="." mediatype="image/*">
                                <xforms:label/>
                            </xforms:output>
                        </xforms:group>
                        <comment> File chooser </comment>
                        <xforms:upload ref="image">
                            <xforms:label/>
                            <xforms:filename ref="@filename"/>
                            <xforms:mediatype ref="@mediatype"/>
                            <xxforms:size ref="@size"/>
                        </xforms:upload>
                    </xml-source>
                    <p>
                        In that example, the upload control stores a temporary URI pointing to a local
                        <code>file:</code> resource. While this URI is not visible from the client web browser, the
                        output control automatically proxies it so that the end user can see the image.
                    </p>
                </section>
                <section>
                    <title>HTML Type</title>
                    <p>
                        When an <code>xforms:output</code> control has a <code>mediatype</code>
                        attribute with value <code>text/html</code>, the value of the node to which
                        the control is bound is interpreted as HTML content. Consider the following
                        XForms instance:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:instance id="my-instance">
                            <form>
                                <html-content>
                                    This is in &amp;lt;b&amp;gt;bold&amp;lt;/b&amp;gt;!
                                </html-content>
                            </form>
                        </xforms:instance>
                    </xml-source>
                    <p>
                        You bind an <code>xforms:output</code> control to the
                        <code>html-content</code> node as follows:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:output ref="instance('my-instance')/html-content" mediatype="text/html"/>
                    </xml-source>
                    <p>
                        This will display the result as HTML, as expected: "This is in <b>bold</b>!". If the
                        <code>mediatype</code> is not specified, the result would be instead: "This is in
                        &lt;b>bold&lt;/b>!". In the XForms instance, the HTML content must be escaped as text. On
                        the other hand, the following content will not work as expected:
                    </p>
                    <xml-source show-namespaces="false">
                        <xforms:instance>
                            <form>
                                <html-content>
                                    This is in in <b>bold</b>!
                                </html-content>
                            </form>
                        </xforms:instance>
                    </xml-source>
                    <note>
                        When using a <code>mediatype="text/html"</code>, an HTML
                        <code>&lt;div></code> element will be generated by the XForms engine to hold
                        the HTML data. As in HTML a <code>&lt;div></code> cannot
                        be embedded into a <code>&lt;p></code>, if you have a
                        <code>&lt;xforms:output mediatype="text/html"></code> control, you should
                        not put that control into a <code>&lt;xhtml:p></code>.
                    </note>
                </section>
            </section>
            <a name="insert-origin-attribute"/>
            <section>
                <title><code>origin</code> Attribute on <code>&lt;xforms:insert></code> Action</title>
                <p>
                    Orbeon Forms supports the XForms 1.1 <code>origin</code> attribute on the
                    <code>&lt;xforms:insert></code> action. This attribute allows specifying the source node to use as
                    template. This allows storing templates separately from the node-set specified by the
                    <code>nodeset</code> attribute. For example:
                </p>
                <xml-source show-namespaces="false">
                    <xforms:insert nodeset="address" at="last()" position="after" origin="instance('template-instance')"/>
                </xml-source>
                <p>
                    The template copied in this case comes from an XForms instance:
                </p>
                <xml-source show-namespaces="false">
                    <xforms:instance id="template-instance">
                        <address>
                            <street>
                                <number/>
                                <name-1/>
                                <name-2/>
                            </street>
                            <apt/>
                            <city/>
                            <state/>
                            <zip/>
                        </address>
                    </xforms:instance>
                </xml-source>
            </section>
            <a name="insert-context-attribute"/>
            <section>
                <title><code>context</code> Attribute on <code>&lt;xforms:insert></code> Action</title>
                <p>
                    Orbeon Forms supports the XForms 1.1 <code>context</code> attribute on the
                    <code>&lt;xforms:insert></code> action. This attribute allows specifying a context for insertion,
                    which along with the <code>origin</code> attribute allows inserting content into elements:
                </p>
                <xml-source show-namespaces="false">
                    <xforms:insert context="instance('main-instance')/books" nodeset="book" origin="instance('book-instance')"/>
                </xml-source>
                <p>
                    With original instances as follows:
                </p>
                <xml-source show-namespaces="false">
                    <xforms:instance id="main-instance">
                        <instance xmlns="">
                            <books/>
                        </instance>
                    </xforms:instance>
                    <xforms:instance id="book-instance">
                        <book xmlns="">
                            <title>Cosmos</title>
                            <author>Carl Sagan</author>
                        </book>
                    </xforms:instance>
                </xml-source>
                <p>
                    The result of a first insertion is:
                </p>
                <xml-source show-namespaces="false">
                    <xforms:instance id="main-instance">
                        <instance xmlns="">
                            <books>
                                <book>
                                    <title>Cosmos</title>
                                    <author>Carl Sagan</author>
                                </book>
                            </books>
                        </instance>
                    </xforms:instance>
                </xml-source>
            </section>
            <a name="validate-relevant-attributes"/>
            <section>
                <title><code>validate</code> and <code>relevant</code> Attributes on <code>&lt;xforms:submission></code></title>
                <p>
                    Orbeon Forms supports the XForms 1.1 <code>validate</code> and <code>relevant</code> attributes
                    on <code>&lt;xforms:submission></code>. These boolean attributes disable processing of validation
                    and relevance respectively for a given submission:
                </p>
                <xml-source>
                    <xforms:submission id="my-submission" method="post" validate="false" relevant="false"
                                       resource="http://example.org/rest/draft/"
                                       replace="none"/>
                </xml-source>
                <p>
                    For more information, please visit the <a
                    href="http://www.w3.org/TR/xforms11/#submit-submission-element">XForms 1.1 specification</a>.
                </p>
            </section>
            <a name="serialization-attribute"/>
            <section>
                <title><code>serialization</code> Attribute on <code>&lt;xforms:submission></code></title>
                <p>
                    Orbeon Forms supports the XForms 1.1 <code>serialization</code> on
                    <code>&lt;xforms:submission></code>. This is particularly useful to specify the value
                    <code>none</code> with a <code>get</code> method:
                </p>
                <xml-source>
                    <xforms:submission id="my-submission" method="get" serialization="none" resource="http://example.org/document.xml"
                                       replace="instance" instance="my-instance"/>
                </xml-source>
                <p>
                    For more information, please visit the <a
                    href="http://www.w3.org/TR/xforms11/#submit-submission-element">XForms 1.1 specification</a>.
                </p>
            </section>
            <a name="asynchronous-submissions"/>
            <section>
                <title>Preliminary Support for Asynchronous Handling of <code>&lt;xforms:submission></code></title>
                <p>
                    Orbeon Forms partially supports the XForms 1.1 <code>mode="asynchronous"</code> attribute on
                    <code>&lt;xforms:submission></code>. The limitations are:
                </p>
                <ul>
                    <li>
                        <p>
                            Asynchronous submissions in an Ajax request are delayed until after everything else in the
                            request has run (including other submissions).
                        </p>
                    </li>
                    <li>
                        <p>
                            Asynchronous submissions are "fire and forget": they only work with
                            <code>replace="none"</code> and no <code>xforms-submit-done</code> /
                            <code>xforms-submit-error</code> events are dispatched.
                        </p>
                    </li>
                    <li>
                        <p>
                            All asynchronous submissions started during a given Ajax request run serially.
                        </p>
                    </li>
                </ul>
                <xml-source>
                    <xforms:submission id="test-submission" mode="asynchronous"
                        ref="." method="put" resource="http://my.service.com/"
                        replace="none"/>
                </xml-source>
                <p>
                    For more information, please visit the <a
                    href="http://www.w3.org/TR/xforms11/#submit-submission-element">XForms 1.1 specification</a>.
                </p>
                <note>
                    <p>
                        XForms 1.1 specifies that <code>mode="asynchronous"</code> should be the default, but due to the
                        client-server nature of the Orbeon Forms XForms engine, Orbeon Forms still defaults to
                        <code>mode="synchronous"</code>.
                    </p>
                </note>
            </section>
            <a name="dispatch-delay"/>
            <section>
                <title>Preliminary Support for <code>delay</code> Attribute on <code>&lt;xforms:dispatch></code> Action</title>
                <p>
                    Orbeon Forms partially supports the XForms 1.1 <code>delay</code> attribute on
                    <code>&lt;xforms:dispatch></code>. The limitations are:
                </p>
                <ul>
                    <li>
                        <p>
                            A delay greater than zero always incurs a round-trip with the client. This may mean higher
                            latency and ressource usage than could be expected. You are advised to use delays in the
                            order of seconds at least.
                        </p>
                    </li>
                    <li>
                        <p>
                            Events are not combined as specified in XForms 1.1.
                        </p>
                    </li>
                    <li>
                        <p>
                            Custom event context information is not supported and simply ignored.
                        </p>
                    </li>
                </ul>
                <p>
                    The boolean <code>xxforms:show-progress</code> attribute allows specifying whether the
                    client must enable the loading indicator when sending back delay events from the client. The default
                    is <code>true</code> and the indicator is used.
                </p>
                <xml-source>
                    <xforms:dispatch name="my-event" targetid="my-model" delay="2000" xxforms:show-progress="false"/>
                </xml-source>
                <p>
                    The <code>xxforms:progress-message</code> attribute allows specifying a custom progress message when
                    <code>xxforms:show-progress</code> is <code>true</code>. By default, the standard progres message is
                    used.
                </p>
                <xml-source>
                    <xforms:dispatch name="my-event" targetid="my-model" delay="2000" xxforms:show-progress="true" xxforms:progress-message="Autosave..."/>
                </xml-source>
                <p>
                    For more information, please visit the <a
                    href="http://www.w3.org/TR/xforms11/#action-dispatch">XForms 1.1 specification</a>.
                </p>
            </section>
            <a name="xforms11-if-while"/>
            <section>
                <title>Conditional Execution and Iteration of XForms Actions</title>
                <p>
                    Orbeon Forms supports the XForms 1.1 <code>if</code> and <code>while</code> attributes on XForms
                    action elements. For more information, please visit the <a
                    href="http://www.w3.org/TR/xforms11/#action-conditional">XForms 1.1 specification</a>.
                </p>
            </section>
            <a name="xforms11-dispatch-targetid"/>
            <section>
                <title><code>targetid</code> attribute on <code>&lt;xforms:dispatch></code></title>
                <p>
                    As of May 2009, in order to prevent attribute clashes with other specifications, the
                    <code>targetid</code> attribute supercedes the <code>target</code> on
                    <code>&lt;xforms:dispatch></code>. <code>target</code> is still supported for backward compatibility.
                </p>
            </section>
            <a name="xforms11-submission-targetref"/>
            <section>
                <title><code>targetref</code> attribute on <code>&lt;xforms:submission></code></title>
                <p>
                    As of May 2009, in order to prevent attribute clashes with other specifications, the
                    <code>targetref</code> attribute supercedes the <code>target</code> attribute on
                    <code>&lt;xforms:submission></code>. <code>target</code> is still supported for backward compatibility.
                </p>
            </section>
            <a name="xforms11-types"/>
            <section>
                <title>XForms 1.1 Types</title>
                <p>
                    Orbeon Forms supports the following XForms types:
                </p>
                <ul>
                    <li>
                        <p>
                            <code>xforms:dayTimeDuration</code>
                        </p>
                    </li>
                    <li>
                        <p>
                            <code>xforms:yearMonthDuration</code>
                        </p>
                    </li>
                    <li>
                        <p>
                            <code>xforms:email</code>
                        </p>
                    </li>
                    <li>
                        <p>
                            <code>xforms:card-number</code>
                        </p>
                    </li>
                </ul>
                <p>
                    These types can be used on binds, e.g.:
                </p>
                <xml-source>
                    <xforms:bind nodeset="my-email" type="xforms:email" required="true()"/>
                </xml-source>
            </section>
            <a name="xforms11-function"/>
            <section>
                <title>XForms 1.1 Functions</title>
                <p>
                    [TODO: List all XForms 1.1 functions implemented]
                </p>
            </section>
        </section>
    </body>
</document>
